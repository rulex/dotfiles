#!/bin/bash
# NOPPOO CHOC MINI

if [ $# -eq 0 ]
then

	keyb=$( lsusb | grep iRiver )
	if [ $? -eq 0 ]
	then
		echo "noppoo choc mini!"

		# NOPPOO CHOC MINI
		setxkbmap se
		xset r 51 # ' key
		xset r 77  # delete key
		xset r 113
		xset r 116
		xset r rate 300 35
		xset -b
		xmodmap -e 'clear Lock' -e 'keycode 0x42 = Control_R' -e 'add control = Control_R' # remap caps to left control
		xmodmap -e 'keycode 77 = Delete' # numlock to delete
		xmodmap -e 'keycode 78 = Insert' # scroll lock to insert
		xmodmap -e 'keycode 119 = End' # del to end
		xmodmap -e 'keycode 127 = Home' # pause to home
		xmodmap -e 'keycode  45 = k K k K less dead_ogonek less' # altgr k to <
		xmodmap -e 'keycode  46 = l L l L greater dead_abovedot greater' # altgr l to >
		xmodmap -e 'keycode  61 = minus underscore minus underscore bar dead_abovedot bar' # altgr - to |
		xmodmap -e 'keycode  31 = i I i I braceleft idotless braceleft' # altgr i to {
		xmodmap -e 'keycode  32 = o O o O braceright OE braceright' # altgr o to }

	fi

	keyb=$( lsusb | grep "Cypress Semiconductor" )
	if [ $? -eq 0 ]
	then
		echo "Keycool 84"

		# KEYCOOL 84
		setxkbmap se
		xset r 77  # delete key
		xset r 113
		xset r 116
		xset r rate 300 35
		xset -b
		xmodmap -e 'clear Lock' -e 'keycode 0x42 = Control_R' -e 'add control = Control_R' # remap caps to left control
		xmodmap -e 'keycode 127 = Insert' # pause to insert
		xmodmap -e 'keycode  45 = k K k K less dead_ogonek less' # altgr k to <
		xmodmap -e 'keycode  46 = l L l L greater dead_abovedot greater' # altgr l to >
		xmodmap -e 'keycode  61 = minus underscore minus underscore bar dead_abovedot bar' # altgr - to |
		xmodmap -e 'keycode  31 = i I i I braceleft idotless braceleft' # altgr i to {
		xmodmap -e 'keycode  32 = o O o O braceright OE braceright' # altgr o to }

	fi
else
	echo 'setxkbmap us'
	setxkbmap $1
	xset r 51 # ' key
	xset r 77  # delete key
	xset r 113
	xset r 116
	xset r rate 300 35
	xset -b
	xmodmap -e 'clear Lock' -e 'keycode 0x42 = Control_R' -e 'add control = Control_R' # remap caps to left control
fi
